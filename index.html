<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title>@s1deed</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/a2d9d5c9a7.js" crossorigin="anonymous"></script>

  <style>
    :root{
      --accent: 155 81 255;
      --glass: rgba(255,255,255,.10);
      --glassBorder: rgba(255,255,255,.18);
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.65);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--txt);
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(var(--accent)/.35), transparent 60%),
        radial-gradient(900px 500px at 80% 90%, rgba(120 70 255/.25), transparent 60%),
        linear-gradient(180deg, #0b0b12, #0a0a0f);
      overflow:hidden;
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
    }

    .bg{
      position:fixed; inset:0;
      background:url("avatar.jpg") center/cover no-repeat;
      filter: blur(22px) saturate(130%) brightness(.7);
      transform: scale(1.1);
      z-index:-2;
    }
    .noise{
      position:fixed; inset:0;
      background:url("https://grainy-gradients.vercel.app/noise.svg");
      opacity:.08; pointer-events:none; z-index:-1;
    }

    .glass{
      background: linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.04));
      border:1px solid var(--glassBorder);
      backdrop-filter: blur(22px) saturate(150%);
      box-shadow: 0 30px 80px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.25);
    }

    .spotify{
      position:absolute;
      top:14px; left:50%; transform:translateX(-50%);
      min-width: 420px;
      max-width: min(720px, 96vw);
      padding:14px 16px;
      border-radius:20px;
      display:flex; gap:12px; align-items:center;
    }
    .dot{width:8px;height:8px;border-radius:50%;background:#34c759}
    .spotCover{width:56px;height:56px;border-radius:14px;object-fit:cover; box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .spotTxt{min-width:0}
    .spotTitle{font-weight:800; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .spotArtist{color:var(--muted); font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .openSpotify{margin-left:auto; opacity:.9}

    .center{
      position:absolute; left:50%; top:50%;
      transform:translate(-50%,-50%);
      display:flex; flex-direction:column; align-items:center; gap:10px;
      text-align:center;
    }
    .avatarCard{
      width:min(420px, 86vw);
      border-radius:26px;
      overflow:hidden;
    }
    .avatar{
      width:100%; height:auto; display:block;
    }
    .user{
      font-size:44px; font-weight:800; letter-spacing:.3px;
      text-shadow: 0 10px 40px rgba(0,0,0,.6);
    }
    .welcome{ color:var(--muted); margin-top:-6px }

    .dock{
      position:absolute; left:50%; transform:translateX(-50%);
      bottom: calc(14px + env(safe-area-inset-bottom));
      width:min(920px, 96vw);
      border-radius:28px; padding:14px 16px 12px;
    }
    .dockTop{
      display:flex; justify-content:space-between; align-items:center; gap:10px; margin-bottom:10px;
    }
    .oldInDock, .dockHint{
      font-size:12px; color:var(--muted);
      padding:8px 10px; border-radius:14px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      white-space:nowrap;
    }
    .oldInDock b{color:#fff}
    .socials{
      display:flex; justify-content:space-between; align-items:flex-end; gap:26px; overflow:auto;
    }
    .social{
      min-width:76px; padding:10px 10px 8px; border-radius:18px;
      text-decoration:none; color:#fff; text-align:center;
      transition:.18s ease;
    }
    .social:hover{ transform:translateY(-3px); background:rgba(255,255,255,.08) }
    .social i{ font-size:28px }
    .social span{ display:block; font-size:12px; margin-top:4px; color:var(--muted) }
    .telegram i{color:#2AABEE}
    .tiktok i{color:#ff2a6d}
    .discord i{color:#5865F2}
    .instagram i{color:#E4405F}
    .steam i{color:#66c0f4}
    .spotifyI i{color:#1DB954}

    @media (max-width:620px){
      .spotify{ left:12px; right:12px; transform:none; top: calc(12px + env(safe-area-inset-top)); min-width:auto }
      .spotCover{ width:46px; height:46px }
      .center{ top:52% }
      .dock{ width:min(560px,95vw); padding:12px 12px 10px; border-radius:24px }
      .socials{ gap:18px }
      .social{ min-width:66px; padding:8px 8px 6px; border-radius:16px }
      .social i{ font-size:26px }
      .social span{ font-size:11px }
    }
  </style>
</head>
<body>
  <div class="bg"></div>
  <div class="noise"></div>

  <!-- Spotify -->
  <div class="spotify glass">
    <span class="dot"></span>
    <img id="cover" class="spotCover" src="" alt="">
    <div class="spotTxt">
      <div id="title" class="spotTitle">Loading…</div>
      <div id="artist" class="spotArtist"></div>
    </div>
    <a id="open" class="openSpotify" target="_blank" href="#">
      <i class="fa-brands fa-spotify"></i>
    </a>
  </div>

  <!-- Center -->
  <div class="center">
    <div class="avatarCard glass">
      <img class="avatar" src="avatar.jpg" alt="avatar">
    </div>
    <div class="user">@s1deed</div>
    <div class="welcome">welcome to my bio:</div>
  </div>

  <!-- iOS Dock -->
  <div class="dock glass">
    <div class="dockTop">
      <div class="oldInDock">старый юз: <b>@soogaci</b></div>
      <div class="dockHint">tap icon</div>
    </div>
    <div class="socials">
      <a class="social telegram" href="https://t.me/s1deed" target="_blank"><i class="fa-brands fa-telegram"></i><span>Telegram</span></a>
      <a class="social tiktok" href="https://www.tiktok.com/@s1deeed?_r=1&_t=ZS-92QwHlSQe4j" target="_blank"><i class="fa-brands fa-tiktok"></i><span>TikTok</span></a>
      <a class="social discord" href="https://discord.gg/DuJNA7z2" target="_blank"><i class="fa-brands fa-discord"></i><span>Discord</span></a>
      <a class="social instagram" href="https://www.instagram.com/s1deed" target="_blank"><i class="fa-brands fa-instagram"></i><span>Instagram</span></a>
      <a class="social steam" href="https://steamcommunity.com/id/soogaci/" target="_blank"><i class="fa-brands fa-steam"></i><span>Steam</span></a>
      <a class="social spotifyI" href="https://open.spotify.com/user/31uumxtifdbgfqvll2txasaipgcu" target="_blank"><i class="fa-brands fa-spotify"></i><span>Spotify</span></a>
    </div>
  </div>

  <script>
    const cover = document.getElementById("cover");
    const title = document.getElementById("title");
    const artist = document.getElementById("artist");
    const open = document.getElementById("open");

    async function getNowPlaying(){
      try{
        const r = await fetch("/api/spotify");
        const d = await r.json();

        if(!d || !d.isPlaying){
          title.textContent = "Nothing playing";
          artist.textContent = "";
          open.style.display = "none";
          return;
        }

        cover.style.opacity = "0";
        setTimeout(() => {
          cover.src = d.cover || "";
          cover.onload = () => cover.style.opacity = "1";
        }, 120);

        title.textContent = d.title || "Playing";
        artist.textContent = d.artist || "";
        open.href = d.url || "#";
        open.style.display = "block";
      }catch(e){
        title.textContent = "Spotify error";
        artist.textContent = "";
        open.style.display = "none";
      }
    }

    getNowPlaying();
    setInterval(getNowPlaying, 10000);
  </script>
</body>
</html>
